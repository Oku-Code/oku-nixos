{ pkgs, config, ... }:

{
  programs.emacs = { 
    enable = true; 
    extraPackages = epkgs: [
      epkgs.nix-mode
      epkgs.doom-themes
      epkgs.doom-modeline
      epkgs.ivy
      epkgs.ivy-prescient
      epkgs.evil
      epkgs.general
      epkgs.dashboard
    ];

    extraConfig = ''
       (setq inhibit-startup-message t)
       (global-set-key (kbd "<escape>") 'keyboard-escape-quit)
       (tool-bar-mode -1)
       (scroll-bar-mode -1)
       (tooltip-mode -1)
       (set-fringe-mode -10) 
       (menu-bar-mode -1)
       (setq visible-bell t)
       (setq use-short-answers t)
       
       ;; Doom Themes
       (setq custom-safe-themes t)
       (let ((hour (string-to-number (substring (current-time-string) 11 13))))
       (if (or ( > hour 18) ( < hour 7))
         (load-theme 'doom-palenight)
         (load-theme 'doom-Iosvkem)))
    '';
  };
}
